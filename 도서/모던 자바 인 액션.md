# 모던 자바 인 액션
- [1. 자바 8, 9, 10, 11 : 무슨 일이 일어나고 있는가?](#1-자바-8-9-10-11--무슨-일이-일어나고-있는가)
- [2. 동작 파라미터화 코드 전달하기](#2-동작-파라미터화-코드-전달하기)

# 1. 자바 8, 9, 10, 11 : 무슨 일이 일어나고 있는가?
자바 8에서 제공하는 기술
- 스트림 API
    - 병렬 연산 지원
    - 고수준 언어로 원하는 동작을 표현, 스트림 라이브러리가 최적의 저수준 실행 방법을 선택
- 메서드에 코드를 전달하는 기법
    - 동작 파라미터화 구현
- 인터페이스의 디폴트 매서드

## 스트림 처리
### 스트림
- 한 번에 한 개씩 만들어지는 연속적인 데이터 항목들의 모임
- 한 프로그램의 출력 스트림은 다른 프로그램의 입력 스트림이 될 수 있음
- 스레드를 사용하지 않으면서도 병렬성을 얻을 수 있음

## 동작 파라미터화로 메서드에 코드 전달하기
### 동작 파라미터화
- 메서드를 다른 메서드의 인수로 넘겨주는 기능

## 병렬성과 공유 가변 데이터
- 스트림 -> 병렬성을 얻을 수 있음
- 안전하게 실행하려면 공유된 가변 데이터에 접근하지 않아야 함
- as-is : `synchronized` 이용, 가변 데이터 보호 -> 일반적으로 시스템 성능에 악영향

## 자바 함수
- 자바의 함수 : 메서드와 같은 의미 + 수학적인 함수처럼 사용

### 메서드 참조
`::` 를 이용해서 준비된 함수를 메서드에 직접 전달
- ```java
    File[]  hiddenFiles = new File(".").listFiles(File::isHidden);
    ```

람다를 포함해 함수도 값으로 취급 가능

필터: 특정 항목을 선택해서 반환

Predicate: 인수로 값을 받아서 true/false를 반환하는 함수

### 스트림
반복 작업
- 외부 반복: 각 요소를 반복하면서 작업 수행 ex. `for-each`
- 내부 반복: 라이브러리 내부에서 모든 데이터가 처리 ex. `stream`

### 디폴트 메서드
- 인터페이스를 쉽게 바꿀 수 있도록 지원
- 디폴트 메서드의 본문은 클래스 구현이 아니라 인터페이스의 일부

이 외에도 null 쉽게 다룰 수 있는 `Optinal` 등 함수형 프로그래밍에서 가져온 아이디어들 존재

# 2. 동작 파라미터화 코드 전달하기
## 동작 파라미터화
아직은 어떻게 실행할 것인지 결정하지 않은 코드 블록
- 코드 블록은 나중에 프로그램에서 호출
- 자주 바뀌는 요구사항에 효과적으로 대응 가능

선택 조건을 결정하는 인터페이스 정의
- 프레디케이트: 어떤 속성에 기초해 boolean 값을 반환하는 함수
- 프레디케이트를 인수로 받아 동작 수행 가능

컬렉션 탐색 로직과 각 항목에 적용할 동작 분리 가능

## 익명 클래스
- 이름이 없는 클래스
- 클래스 선언과 인스턴스화를 동시에 가능

예시
- 이전에 Predicate 클래스를 만들었던 걸 인수로 넘겨주는 시점에 클래스 선언하면서 동작을 직접 파라미터화
- ```java
    interface ApplePredicate {
        boolean test(Apple apple);
    }
    class Test {
        List<Apple> filter(List<Apple> inventory, ApplePredicate p) {...}
        void test() {
            List<Apple> inventory = Arrays.asList(...);
            List<Apple> filtered = filter(inventory, new ApplePredicate() {
                public boolean test(Apple apple) {
                    return RED.equals(apple.getColor());
                }
            });
        }
    }
    ```

## 람다 표현식
위 예시 간단하게 재구현 가능
- ```java
    List<Apple> filtered = filter(inventory, (Apple apple) -> RED.equals(apple.getColor()));
    ```

## Runnable
스레드 이용 시, 익명 클래스가 Runnable 인터페이스를 구현하도록 함 -> 람다로 변경 가능

## Callable
ExecutorService 에 전달
- 태스트는 스레드 풀로 보내고, 결과를 Future로 저장 -> 이것도 람다로 변경 가능